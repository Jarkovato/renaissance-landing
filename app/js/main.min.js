window.onload=()=>{document.querySelectorAll(".item__btn").forEach((t,e)=>{let n=function(t){let e=localStorage.getItem("btnIndex"+t);if("string"==typeof e)return e.split(" ")}(e),s=(l=e,localStorage.getItem("btnText"+l));var l;null!=n&&""!=n&&null!=n&&(t.classList.remove("item__btn","btn"),n.forEach(e=>{t.classList.add(e),console.log(e)})),null!=s&&""!=s&&null!=s&&(t.innerHTML=""+s),t.addEventListener("click",(function(){fetch("https://jsonplaceholder.typicode.com/posts/1").then(()=>{t.innerHTML="Загрузка",t.classList.add("btn-loading")}).then(()=>{setTimeout(()=>{t.classList.contains("btn-success")?(t.classList.remove("btn-loading"),t.innerHTML="Купить",t.classList.remove("btn-success"),localStorage.setItem("btnIndex"+e,t.classList.value),localStorage.setItem("btnText"+e,t.innerHTML)):(t.innerHTML="В корзине",t.classList.remove("btn-loading"),t.classList.add("btn-success"),localStorage.setItem("btnIndex"+e,t.classList.value),localStorage.setItem("btnText"+e,t.innerHTML))},1e3)}).catch(t=>alert(t))}))})};